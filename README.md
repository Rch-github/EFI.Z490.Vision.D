# EFI.Z490.Vision.D
Hackintosh OpenCore EFI for Gigabyte Z490 Vision-D

#### 
- **OpenCore** [0.5.9](https://github.com/acidanthera/OpenCorePkg) + [ACPI](EFI/OC/ACPI)
- [Config](EFI/OC/config.plist) by **OpenCore Desktop Guide** recommends -> [Comet Lake](https://dortania.github.io/OpenCore-Desktop-Guide/config.plist/comet-lake.html)
- Based on `Hackintosh-Intel-i9-10900k-Gigabyte-Z490-Vision-D` [Config](https://github.com/SchmockLord/Hackintosh-Intel-i9-10900k-Gigabyte-Z490-Vision-D/blob/master/EFI/OC/config.plist). *Thanks to: [SchmockLord](https://github.com/SchmockLord).*
- Based on `Gigabyte Z490 Vision D (Thunderbolt 3) + i5-10400 + AMD RX 580` [EFI](https://www.tonymacx86.com/threads/gigabyte-z490-vision-d-thunderbolt-3-i5-10400-amd-rx-580.298642/). *Thanks to: [CaseySJ](https://www.tonymacx86.com/members/caseysj.2134452/).*
- [Config](EFI/OC/config.plist) **clean-up** `removed unused properties, duplicity and legacy settings`
- **Minimal [Drivers](EFI/OC/Drivers)** `HFSPlus.efi, OpenRuntime.efi only`
- **Latest [Kexts](EFI/OC/Kexts)** `1.6.2020`

#### Hardware
- Intel **i9-10900k**
- Gigabyte **Z490 Vision D** *(Audio: Realtek ALC1220-VB, 1Gbit Ethernet: Intel I219-V, 2.5Gbit Ethernet: Intel I225-V)*
- Gigabyte **Radeon 5500 XT**
- **Fenvi T919** Wireless Card *(Wifi/BT - BCM94360CD)*

#### Tested
- GPU: AMD **Radeon** (contains: agdpmod=pikera) and Intel **UHD 630** (i9 iGPU)
- **Wifi + BT**
- All **USB** ports
- All **Ethernet** ports (Intel I219-V + I225-V)
- Audio: Realtek **ALC 1220 - VB** (with: layout-id=11)
- **Thunderbolt 3** (tested: Universal Audio Apollo x8p)
- Sleep/Wake
- Shutdown/Restart

#### Installation/configuration
- Create Install USB disk [Open Core Desktop Guide](https://dortania.github.io/OpenCore-Desktop-Guide/installer-guide/)
- Mount EFI partition with [MountEFI](https://github.com/corpnewt/MountEFI) or [Hackintool](https://github.com/headkaze/Hackintool)
- Copy [EFI](EFI) folder to the root of the EFI partition
- In [Config](EFI/OC/config.plist) navigate to `PlatformInfo → Generic` and edit: `MLB, ROM, SystemSerialNumber, SystemUUID` *(new you can generated by: [GenSMBIOS](https://github.com/corpnewt/GenSMBIOS))*
- Change BIOS-Settings *(by section: BIOS)*
- Reboot from the installation media and [install macOS](https://dortania.github.io/OpenCore-Desktop-Guide/installation/installation-process.html).

#### ACPI
- SSDT-AWAC.aml - *CPU power management*
- SSDT-EC-USBX-DESKTOP.aml - *Hides the Embedded controller and creates a fake one for macOS*
- SSDT-PLUG-DRTNIA.aml - *Alternative to the real time clock (RTC)*
- SSDT-TB3.aml - *Thunderbold 3 support*
- SSDT-UIAC.aml - *USB port mapping*

#### Kexts
Order by run in config.plist
- **Lilu** v1.4.5 - Acidanthera plug-in manager
- **VirtualSMC** v1.1.4 - Emulates the SMC chip found on real macs, without this macOS will not boot.
- **WhateverGreen** v1.4.0 - Lilu plugin providing patches to select GPUs on macOS.
- VirtualSMC → **SMCProcessor** - Used for monitoring CPU temperature.
- VirtualSMC → **SMCSuperIO** - Used for monitoring fan speed.
- **USBInjectAll** v0.7.1 - Used for injecting Intel USB controllers on systems without defined USB ports in ACPI.
- **FakePCIID** v1.3.15 - Support for kext to attach to any IOPCIDevice
- FakePCIID → **FakePCIID_Intel_HDMI_Audio** - Support for unsupported HDAU devices which provide HDMI-audio.
- FakePCIID → **FakePCIID_Intel_I225-V** - 2.5Gbit Ethernet (Intel I225-V)
- **AppleALC** v1.5.0 - Lilu plug-in, for managing internal Realtek ALC-1220 audio.
- **IntelMausiEthernet** v2.5.1d1 - Intel onboard LAN driver for macOS.
- **NVMeFix** - Lilu plug-in, for managing power consumption on NVMe SSDs [NVMeFix](acidanthera/NVMeFix)
- **USBWakeFixup** - Fix for ACPI device with the right wakeup params (systems without a working EC) [USBWakeFixup](osy86/USBWakeFixup)

#### BIOS
- Thanks to: [CaseySJ](https://www.tonymacx86.com/members/caseysj.2134452/) ; Guide [original](https://www.tonymacx86.com/threads/gigabyte-z490-vision-d-thunderbolt-3-i5-10400-amd-rx-580.298642/) + [Screenshots](https://www.tonymacx86.com/threads/gigabyte-z490-vision-d-thunderbolt-3-i5-10400-amd-rx-580.298642/#lg=post-2128415&slide=9)
- Update to **F3** version
- Press **F2** if necessary to toggle into **Advanced Mode**
- **Save & Exit** → Load Optimized Defaults (defaults and optimized setup)
- **Favorites**
  - Extreme Memory Profile(X.M.P) → Profile1
  - CSM Support → Disabled
  - VT-d → Disabled
- **Settings → IOPorts**
  - Initial Display Output → PCIe 1 Slot (if GPU in slot 1) or IGFX (if using iGPU to display monitor)
  - Internal Graphics → Enabled (not Auto)
  - Above 4G Decoding → Enabled
- **Settings → IOPorts → Thunderbolt**
  - Security Level → No Security
  - Thunderbold Boot Support → Boot once
- **Settings → IOPorts → Thunderbolt → Discrete Thunderbolt Configuration**
  - GPIO3 Force Pwr → Enabled
- **Settings → IOPorts → USB Configuration**
  - XHCI Hand-off → Enabled
- **Boot** → Windows 10 Features → Other OS
- **Boot** → CSM Support (confirm that it's "Disabled")
- **Save & Exit** → Save Profiles

#### Sources
- [Gigabyte Z490 Vision D (Thunderbolt 3) + i5-10400 + AMD RX 580](https://www.tonymacx86.com/threads/gigabyte-z490-vision-d-thunderbolt-3-i5-10400-amd-rx-580.298642/) by: [CaseySJ](https://www.tonymacx86.com/members/caseysj.2134452/)
- [Hackintosh-Intel-i9-10900k-Gigabyte-Z490-Vision-D](https://github.com/SchmockLord/Hackintosh-Intel-i9-10900k-Gigabyte-Z490-Vision-D) by: [SchmockLord](https://github.com/SchmockLord)